<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="">

  <title><%= title %></title>
  <% include partials/head %>
  <link href="/css/teamview.css" rel="stylesheet"/>
</head>
<body>

  <% include partials/navbar %>


<div id="wrapper">

<div id="download" class="container">
    Download this team!
</div>

<%
var abilities = [] ;
var moves = [];
    for (var x = 0; x < data.length; x++) {
        var mon = data[x];
        var i = Math.floor(Math.random() * mon.abilities.length);
        abilities.push(mon.abilities[i].name.toUpperCase());
        moves[x] = [];
        var nummoves = 4;
        if (mon.moves.length < 4) {
            nummoves = mon.moves.length;
        }
        for (var i = 0; i < nummoves; i++) {
            moves[x].push(mon.moves[Math.floor(Math.random() * mon.moves.length)].name.toUpperCase());
        }
        %>
<div class="monster container-fluid">
    <div class="row-fluid">
        <div class="col-xs-12 col-sm-6 col-md-3">
            <img class="monsprite" src="http://pldh.net/media/pokemon/gen6/xy/001.png" alt="<%=mon.name %>">
        </div>
        <div class="col-xs-12 col-sm-6 col-md-9">
<div class="container-fluid">
    <div class="row-fluid">
        <div class="monname col-xs-12">#<%=mon.national_id%> <%=mon.name %></div>
        <div class="montype col-xs-12 col-sm-4 type <%=mon.types[0].name%>type"><%=mon.types[0].name.toUpperCase() %></div>
        <%
        if (mon.types.length == 1) { %>
            <div class="montype col-xs-12 col-sm-4 type notype">No Type</div><%
        }
        else { %>
            <div class="montype col-xs-12 col-sm-4 type <%=mon.types[1].name%>type"><%=mon.types[1].name.toUpperCase() %></div>
        <%
        }
        %>
        <div class="monability type notype col-xs-12 col-sm-4"><%=abilities[x].toUpperCase() %></div>
    </div>
    <div class="row">
        <%
        for (var i = 0; i < moves[x].length; i++) {
            %>
            <div class="monmove col-xs-6"><%=moves[x][i]%></div>
            <%
        }%>
    </div>
</div>
        </div>
    </div>
</div>
        <%
    }
%>

</div>
</body>

<script type="text/javascript">

Downloadify.create('download',{
    filename: function() { return "myteam.txt" },
    data: function () {
        return [
        <%
            for (var i = 0; i < data.length; i++) {
                var mon = data[i];
            %>
                "
                <%=mon.name%> @ Leftovers\n
                Trait: <%=abilities[i]%>\n
                EVs: 85 HP/ 85 Atk / 85 Def / 85 SAtk / 85 SDef / 85 Spd\n
                Hardy Nature\n
            <%
                for (var m = 0; m < moves[i].length; m++) {
                %>
                    - <%=moves[i][m]%>\n
                <%
                }
                %>"
                <%
            }
        %>
        ].join("\n");
    },
    onComplete: function () {
        document.getElementById("download").innerHTML = "File downloaded!";
    },
    onCancel: function () {
        document.getElementById("download").innerHTML = "Download Canceled!";
    },
    onError: function () {
        document.getElementById("download").innerHTML = "Oops! Something went wrong!";
    }
});

</script>

</html>
